<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html">

	<h:form id="form1">
		<div class="ui-fluid">
			<p:growl id="message" showDetail="true" />

			<p:panel id="pnl" header="Mes Contacts">
				<p:dataTable id="contactList" var="contact"
					value="#{contactController.contacts}" paginator="true"
					paginatorPosition="bottom" reflow="true" rows="8"
					styleClass="card no-border" rowKey="#{contact.id_contact}"
					selectionMode="single"
					selection="#{contactController.selectedContact}"
					emptyMessage="Pas de contact(s) trouvé(s) avec les critères de recherche donnés"
					filteredValue="#{contactController.filteredContacts}"
					widgetVar="contactTable">

					<f:facet name="header">
						<p:outputPanel style="width:50%; margin:0px auto; display:block;">
							<p:inputText id="globalFilter"
								onkeyup="PF('contactTable').filter()"
								placeholder="Entrer un critère de recherche global" />
						</p:outputPanel>
					</f:facet>

					<p:column filterBy="#{contact.nom}" filterStyle="display:none"
						filterMatchMode="contains" headerText="Nom">
						<h:outputText value="#{contact.nom}" />
					</p:column>

					<p:column filterBy="#{contact.prenom}" filterStyle="display:none"
						filterMatchMode="contains" headerText="Prénom">
						<h:outputText value="#{contact.prenom}" />
					</p:column>

					<p:column filterBy="#{contact.num_tel}" filterStyle="display:none"
						filterMatchMode="contains" headerText="Téléphone">
						<h:outputText value="#{contact.num_tel}" />
					</p:column>

					<p:column filterBy="#{contact.email}" filterStyle="display:none"
						filterMatchMode="contains" headerText="E-mail">
						<h:outputText value="#{contact.email}" />
					</p:column>
				</p:dataTable>

				<p:contextMenu for="contactList">
					<p:menuitem value="Afficher" update="DetailsContact"
						icon="fa fa-search" oncomplete="PF('DetailsContactDialog').show()" />

					<p:menuitem value="Modifier" update="form2:ModifierContact"
						icon="fa fa-edit"
						oncomplete="PF('ModificationContactDialog').show()" />

					<p:menuitem value="Effacer" icon="fa fa-trash"
						actionListener="#{contactController.deleteContact()}">
						<p:confirm header="Confirmation"
							message="Etes vous sûr de vouloir supprimer ce contact ?"
							icon="ui-icon-alert" />
					</p:menuitem>
				</p:contextMenu>

				<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
					<p:commandButton value="Oui" type="button"
						styleClass="ui-confirmdialog-yes btn-success" icon="ui-icon-check" />
					<p:commandButton value="Non" type="button"
						styleClass="ui-confirmdialog-no btn-danger" icon="ui-icon-close" />
				</p:confirmDialog>

			</p:panel>

			<p:dialog header="Details Contact" widgetVar="DetailsContactDialog"
				modal="true" showEffect="fade" hideEffect="fade" resizable="false"
				responsive="true" width="700" height="400" styleClass="box-primary">
				<p:outputPanel id="DetailsContact"
					style="text-align:center; width: 100%; height: 100%">
					<p:panelGrid columns="2" style="width: 100%; height: 100% "
						styleClass="ui-fluid card">
						<p:outputLabel value="Id:" />
						<p:outputLabel
							value="#{contactController.selectedContact.id_contact}" />

						<p:outputLabel value="Nom:" />
						<p:outputLabel value="#{contactController.selectedContact.nom}" />

						<p:outputLabel value="Prénom" />
						<p:outputLabel value="#{contactController.selectedContact.prenom}" />

						<p:outputLabel value="Téléphone" />
						<p:outputLabel
							value="#{contactController.selectedContact.num_tel}" />

						<p:outputLabel value="E-mail" />
						<p:outputLabel value="#{contactController.selectedContact.email}" />

						<p:outputLabel value="Profession" />
						<p:outputLabel
							value="#{contactController.selectedContact.profession}" />

						<p:outputLabel value="Adresse" />
						<p:outputLabel
							value="#{contactController.selectedContact.adresse}" />

						<p:outputLabel value="Date de naissance" />
						<p:outputLabel
							value="#{contactController.selectedContact.date_naiss}" />

						<p:outputLabel value="Date d'ajout" />
						<p:outputLabel
							value="#{contactController.selectedContact.date_ajout}" />

						<p:outputLabel value="Groupe" />
						<p:outputLabel
							value="#{contactController.selectedContact.groupe.nom}" />
					</p:panelGrid>
				</p:outputPanel>
			</p:dialog>
		</div>
	</h:form>

	<h:form id="form2">
		<div class="ui-fluid">
			<p:dialog header="Modification Contact"
				widgetVar="ModificationContactDialog" modal="true" showEffect="fade"
				hideEffect="fade" resizable="false" width="800"
				styleClass="box-warning">
				<p:panelGrid id="ModifierContact" columns="4"
					columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
					layout="grid" styleClass="ui-fluid card">

					<p:outputLabel for="contactName" value="Nom" />
					<p:inputText id="contactName"
						value="#{contactController.selectedContact.nom}"
						label="contactName" />

					<p:outputLabel for="contactPrenom" value="Prénom" />
					<p:inputText id="contactPrenom"
						value="#{contactController.selectedContact.prenom}"
						label="contactPrenom" />

					<p:outputLabel for="contactTel" value="Téléphone" />
					<p:inputText id="contactTel"
						value="#{contactController.selectedContact.num_tel}"
						label="contactTel" />

					<p:outputLabel for="contactMail" value="E-Mail" />
					<p:inputText id="contactMail"
						value="#{contactController.selectedContact.email}"
						label="contactMail" />

					<p:outputLabel for="contactProfession" value="Profession" />
					<p:inputText id="contactProfession"
						value="#{contactController.selectedContact.profession}"
						label="contactProfession" />

					<p:outputLabel for="contactAdresse" value="Adresse" />
					<p:inputTextarea id="contactAdresse"
						value="#{contactController.selectedContact.adresse}"
						label="contactAdresse" />

					<p:outputLabel for="contactDateNaissance" value="Date de naissance" />
					<p:calendar id="contactDateNaissance"
						value="#{contactController.selectedContact.date_naiss}"
						navigator="true" yearRange="-100:+100" pattern="dd-MM-yyyy"
						mask="true" showOn="both" label="contactDateNaissance" />

					<p:outputLabel for="listeGroupe" value="Groupe " />
					<p:selectOneMenu id="listeGroupe"
						value="#{contactController.selectedGroupe}">
						<f:selectItem
							itemLabel="#{contactController.selectedContact.groupe.nom}"
							itemValue="#{contactController.selectedContact.groupe.id_groupe}" />
						<f:selectItems value="#{contactController.groupeLabels}" />
					</p:selectOneMenu>

					<p:commandButton icon="fa fa-save" title="Modifier"
						styleClass="btn-warning"
						actionListener="#{contactController.updateContact()}"
						update="ModifierContact" />

				</p:panelGrid>
			</p:dialog>
		</div>
	</h:form>


</ui:composition>